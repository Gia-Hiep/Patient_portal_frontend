{"ast":null,"code":"const BASE = process.env.REACT_APP_API_BASE_URL || \"http://localhost:8080\";\n\n/** Lấy header Authorization từ localStorage  */\nfunction authHeaders() {\n  const token = localStorage.getItem(\"token\");\n  return token ? {\n    Authorization: `Bearer ${token}`\n  } : {};\n}\n\n/** Xử lý response JSON/Text chung **/\nasync function handleJsonResponse(res) {\n  var _data5;\n  let data = null;\n  let text = \"\";\n  try {\n    const ct = res.headers.get(\"content-type\") || \"\";\n    if (ct.includes(\"application/json\")) {\n      data = await res.json();\n    } else {\n      text = await res.text();\n    }\n  } catch (_) {}\n  if (!res.ok) {\n    var _data, _data2, _data3, _data4;\n    const message = ((_data = data) === null || _data === void 0 ? void 0 : _data.detail) || ((_data2 = data) === null || _data2 === void 0 ? void 0 : _data2.message) || ((_data3 = data) === null || _data3 === void 0 ? void 0 : _data3.error) || text || `${res.status} ${res.statusText || \"Request failed\"}`;\n    const err = new Error(message);\n    err.status = res.status;\n    err.code = ((_data4 = data) === null || _data4 === void 0 ? void 0 : _data4.code) || null;\n    err.data = data;\n    throw err;\n  }\n  return (_data5 = data) !== null && _data5 !== void 0 ? _data5 : {};\n}\nexport async function postJson(path, body, options = {}) {\n  const res = await fetch(`${BASE}${path}`, {\n    method: \"POST\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...authHeaders(),\n      ...(options.headers || {})\n    },\n    body: JSON.stringify(body),\n    ...options\n  });\n  return handleJsonResponse(res);\n}\nexport async function getJson(path, options = {}) {\n  let url = `${BASE}${path}`;\n  if (options.params && typeof options.params === \"object\") {\n    const qs = new URLSearchParams(options.params).toString();\n    if (qs) url += (url.includes(\"?\") ? \"&\" : \"?\") + qs;\n  }\n  const res = await fetch(url, {\n    method: \"GET\",\n    headers: {\n      ...authHeaders(),\n      ...(options.headers || {})\n    },\n    ...options\n  });\n  return handleJsonResponse(res);\n}\nexport async function putJson(path, body, options = {}) {\n  const res = await fetch(`${BASE}${path}`, {\n    method: \"PUT\",\n    headers: {\n      \"Content-Type\": \"application/json\",\n      ...authHeaders(),\n      ...(options.headers || {})\n    },\n    body: JSON.stringify(body),\n    ...options\n  });\n  return handleJsonResponse(res);\n}\nexport const getMyProfile = () => getJson(\"/api/profile/me\");\nexport const updateMyProfile = payload => putJson(\"/api/profile/me\", payload);\nexport const getMyVisits = () => getJson(\"/api/visits\"); // list\nexport const getVisitDetail = id => getJson(`/api/visits/${id}`); // detail","map":{"version":3,"names":["BASE","process","env","REACT_APP_API_BASE_URL","authHeaders","token","localStorage","getItem","Authorization","handleJsonResponse","res","_data5","data","text","ct","headers","get","includes","json","_","ok","_data","_data2","_data3","_data4","message","detail","error","status","statusText","err","Error","code","postJson","path","body","options","fetch","method","JSON","stringify","getJson","url","params","qs","URLSearchParams","toString","putJson","getMyProfile","updateMyProfile","payload","getMyVisits","getVisitDetail","id"],"sources":["C:/Users/ACER/Desktop/Patiend_portal_fronend/Patient_portal_frontend/src/services/api.js"],"sourcesContent":["const BASE = process.env.REACT_APP_API_BASE_URL || \"http://localhost:8080\";\r\n\r\n\r\n/** Lấy header Authorization từ localStorage  */\r\nfunction authHeaders() {\r\n  const token = localStorage.getItem(\"token\");\r\n  return token ? { Authorization: `Bearer ${token}` } : {};\r\n}\r\n\r\n/** Xử lý response JSON/Text chung **/\r\nasync function handleJsonResponse(res) {\r\n  let data = null;\r\n  let text = \"\";\r\n\r\n  try {\r\n    const ct = res.headers.get(\"content-type\") || \"\";\r\n    if (ct.includes(\"application/json\")) {\r\n      data = await res.json();\r\n    } else {\r\n      text = await res.text();\r\n    }\r\n  } catch (_) {}\r\n\r\n  if (!res.ok) {\r\n    const message =\r\n      data?.detail ||\r\n      data?.message ||\r\n      data?.error ||\r\n      text ||\r\n      `${res.status} ${res.statusText || \"Request failed\"}`;\r\n    const err = new Error(message);\r\n    err.status = res.status;\r\n    err.code = data?.code || null;\r\n    err.data = data;\r\n    throw err;\r\n  }\r\n  return data ?? {};\r\n}\r\n\r\nexport async function postJson(path, body, options = {}) {\r\n  const res = await fetch(`${BASE}${path}`, {\r\n    method: \"POST\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...authHeaders(),\r\n      ...(options.headers || {}),\r\n    },\r\n    body: JSON.stringify(body),\r\n    ...options,\r\n  });\r\n  return handleJsonResponse(res);\r\n}\r\n\r\nexport async function getJson(path, options = {}) {\r\n  let url = `${BASE}${path}`;\r\n  if (options.params && typeof options.params === \"object\") {\r\n    const qs = new URLSearchParams(options.params).toString();\r\n    if (qs) url += (url.includes(\"?\") ? \"&\" : \"?\") + qs;\r\n  }\r\n  const res = await fetch(url, {\r\n    method: \"GET\",\r\n    headers: { ...authHeaders(), ...(options.headers || {}) },\r\n    ...options,\r\n  });\r\n  return handleJsonResponse(res);\r\n}\r\n\r\nexport async function putJson(path, body, options = {}) {\r\n  const res = await fetch(`${BASE}${path}`, {\r\n    method: \"PUT\",\r\n    headers: {\r\n      \"Content-Type\": \"application/json\",\r\n      ...authHeaders(),\r\n      ...(options.headers || {}),\r\n    },\r\n    body: JSON.stringify(body),\r\n    ...options,\r\n  });\r\n  return handleJsonResponse(res);\r\n}\r\n\r\nexport const getMyProfile = () => getJson(\"/api/profile/me\");\r\nexport const updateMyProfile = (payload) => putJson(\"/api/profile/me\", payload);\r\nexport const getMyVisits = () => getJson(\"/api/visits\");          // list\r\nexport const getVisitDetail = (id) => getJson(`/api/visits/${id}`); // detail"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}