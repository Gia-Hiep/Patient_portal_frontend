{"ast":null,"code":"import { getJson, putJson } from \"./api\";\n\n/**\r\n * Lấy danh sách thông báo của user hiện tại\r\n * - Backend sẽ tự trả [] nếu user tắt auto notification\r\n * - Luôn đảm bảo frontend nhận được Array\r\n */\nexport const getNotifications = async () => {\n  try {\n    const res = await getJson(\"/api/autonotification\");\n    return Array.isArray(res) ? res : [];\n  } catch (err) {\n    console.error(\"getNotifications error:\", err);\n    return [];\n  }\n};\n\n/**\r\n * Đánh dấu 1 thông báo là đã đọc\r\n * @param {number} id - notification id\r\n */\nexport const markNotificationRead = async id => {\n  if (!id) {\n    return Promise.resolve(); // đảm bảo luôn trả Promise\n  }\n  try {\n    return await putJson(`/api/autonotification/${id}/read`, {});\n  } catch (err) {\n    console.error(\"markNotificationRead error:\", err);\n    throw err;\n  }\n};","map":{"version":3,"names":["getJson","putJson","getNotifications","res","Array","isArray","err","console","error","markNotificationRead","id","Promise","resolve"],"sources":["C:/Users/ACER/Desktop/Patiend_portal_fronend/Patient_portal_frontend/src/services/notification.js"],"sourcesContent":["import { getJson, putJson } from \"./api\";\r\n\r\n/**\r\n * Lấy danh sách thông báo của user hiện tại\r\n * - Backend sẽ tự trả [] nếu user tắt auto notification\r\n * - Luôn đảm bảo frontend nhận được Array\r\n */\r\nexport const getNotifications = async () => {\r\n  try {\r\n    const res = await getJson(\"/api/autonotification\");\r\n    return Array.isArray(res) ? res : [];\r\n  } catch (err) {\r\n    console.error(\"getNotifications error:\", err);\r\n    return [];\r\n  }\r\n};\r\n\r\n/**\r\n * Đánh dấu 1 thông báo là đã đọc\r\n * @param {number} id - notification id\r\n */\r\nexport const markNotificationRead = async (id) => {\r\n  if (!id) {\r\n    return Promise.resolve(); // đảm bảo luôn trả Promise\r\n  }\r\n\r\n  try {\r\n    return await putJson(`/api/autonotification/${id}/read`, {});\r\n  } catch (err) {\r\n    console.error(\"markNotificationRead error:\", err);\r\n    throw err;\r\n  }\r\n};\r\n"],"mappings":"AAAA,SAASA,OAAO,EAAEC,OAAO,QAAQ,OAAO;;AAExC;AACA;AACA;AACA;AACA;AACA,OAAO,MAAMC,gBAAgB,GAAG,MAAAA,CAAA,KAAY;EAC1C,IAAI;IACF,MAAMC,GAAG,GAAG,MAAMH,OAAO,CAAC,uBAAuB,CAAC;IAClD,OAAOI,KAAK,CAACC,OAAO,CAACF,GAAG,CAAC,GAAGA,GAAG,GAAG,EAAE;EACtC,CAAC,CAAC,OAAOG,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,yBAAyB,EAAEF,GAAG,CAAC;IAC7C,OAAO,EAAE;EACX;AACF,CAAC;;AAED;AACA;AACA;AACA;AACA,OAAO,MAAMG,oBAAoB,GAAG,MAAOC,EAAE,IAAK;EAChD,IAAI,CAACA,EAAE,EAAE;IACP,OAAOC,OAAO,CAACC,OAAO,CAAC,CAAC,CAAC,CAAC;EAC5B;EAEA,IAAI;IACF,OAAO,MAAMX,OAAO,CAAC,yBAAyBS,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;EAC9D,CAAC,CAAC,OAAOJ,GAAG,EAAE;IACZC,OAAO,CAACC,KAAK,CAAC,6BAA6B,EAAEF,GAAG,CAAC;IACjD,MAAMA,GAAG;EACX;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}